    -- Footstep Code

    local footsteps6walk = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/carpet/fly_gregory_carpet_walk_0.wav',

        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/concrete/fly_gregory_concrete_walk_0',
        
        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/dirt/fly_gregory_dirt_walk_0',
        [78] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/dirt/fly_gregory_dirt_walk_0',
        [68] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/dirt/fly_gregory_dirt_walk_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/metal/fly_gregory_metal_walk_0',
        [86] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/metal/fly_gregory_metal_walk_0',
        [71] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/metal/fly_gregory_metal_walk_0',   

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/wood/fly_gregory_wood_walk_0'             
    }
   
    local footsteps7walk = {
        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/hardtile/fly_gregory_hardTile_walk_0',
        [89] = 'whynotboi/securitybreach/base/gregory/footsteps/walk/hardtile/fly_gregory_hardTile_walk_0'
    }

    local footsteps6run = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/footsteps/run/carpet/fly_gregory_carpet_run_0',
        
        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/footsteps/run/hardtile/fly_gregory_hardTile_run_0',
        [89] = 'whynotboi/securitybreach/base/gregory/footsteps/run/hardtile/fly_gregory_hardTile_run_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/footsteps/run/metal/fly_gregory_metal_run_0',
        [86] = 'whynotboi/securitybreach/base/gregory/footsteps/run/metal/fly_gregory_metal_run_0',
        [71] = 'whynotboi/securitybreach/base/gregory/footsteps/run/metal/fly_gregory_metal_run_0',

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/footsteps/run/wood/fly_gregory_wood_run_0'
    }

    local footsteps7run = {
        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/footsteps/run/concrete/fly_gregory_concrete_run_0',     
        
        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/footsteps/run/dirt/fly_gregory_dirt_run_0',
        [78] = 'whynotboi/securitybreach/base/gregory/footsteps/run/dirt/fly_gregory_dirt_run_0',
        [68] = 'whynotboi/securitybreach/base/gregory/footsteps/run/dirt/fly_gregory_dirt_run_0'
    }

    local footstepscrouchwalk = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/carpet/fly_gregory_carpet_crouch_walk_0',

        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/concrete/fly_gregory_concrete_crouch_walk_0',
        
        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/dirt/fly_gregory_dirt_crouch_walk_0',
        [78] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/dirt/fly_gregory_dirt_crouch_walk_0',
        [68] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/dirt/fly_gregory_dirt_crouch_walk_0',

        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/hardtile/fly_gregory_hardTile_crouch_walk_0',
        [89] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/hardtile/fly_gregory_hardTile_crouch_walk_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/metal/fly_gregory_metal_crouch_walk_0',
        [86] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/vent/fly_gregory_vent_crawl_0',
        [71] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/vent/fly_gregory_vent_crawl_0',   

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchwalk/wood/fly_gregory_wood_crouch_walk_0'             
    }

    local footstepscrouchrun6 = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/carpet/fly_gregory_carpet_crouch_run_0',

        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/hardtile/fly_gregory_hardTile_crouch_run_0',
        [89] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/hardtile/fly_gregory_hardTile_crouch_run_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/metal/fly_gregory_metal_crouch_run_0',
        [86] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/vent/fly_gregory_vent_crawl_fast_0',
        [71] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/vent/fly_gregory_vent_crawl_fast_0',

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/wood/fly_gregory_wood_crouch_run_0'             
    }

    local footstepscrouchrun7 = {
        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/concrete/fly_gregory_concrete_crouch_run_0',

        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/dirt/fly_gregory_dirt_crouch_run_0',
        [78] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/dirt/fly_gregory_dirt_crouch_run_0',
        [68] = 'whynotboi/securitybreach/base/gregory/footsteps/crouchrun/dirt/fly_gregory_dirt_crouch_run_0',
    }

    local jump5 = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/jump/carpet/fly_gregory_carpet_jump_0',

        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/jump/dirt/fly_gregory_dirt_jump_0',
        [78] = 'whynotboi/securitybreach/base/gregory/jump/dirt/fly_gregory_dirt_jump_0',
        [68] = 'whynotboi/securitybreach/base/gregory/jump/dirt/fly_gregory_dirt_jump_0',
        
        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/jump/hardtile/fly_gregory_hardTile_jump_0',
        [89] = 'whynotboi/securitybreach/base/gregory/jump/hardtile/fly_gregory_hardTile_jump_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/jump/metal/fly_gregory_metal_jump_0',
        [86] = 'whynotboi/securitybreach/base/gregory/jump/metal/fly_gregory_metal_jump_0',
        [71] = 'whynotboi/securitybreach/base/gregory/jump/metal/fly_gregory_metal_jump_0'    
    }
   
    local jump6 = {
        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/jump/concrete/fly_gregory_concrete_jump_0',
        
        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/jump/wood/fly_gregory_wood_jump_0'         
    }

    local land5 = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/land/carpet/fly_gregory_carpet_land_0',

        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/land/dirt/fly_gregory_dirt_land_0',
        [78] = 'whynotboi/securitybreach/base/gregory/land/dirt/fly_gregory_dirt_land_0',
        [68] = 'whynotboi/securitybreach/base/gregory/land/dirt/fly_gregory_dirt_land_0',
        
        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/land/hardtile/fly_gregory_hardTile_land_0',
        [89] = 'whynotboi/securitybreach/base/gregory/land/hardtile/fly_gregory_hardTile_land_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/land/metal/fly_gregory_metal_land_0',
        [86] = 'whynotboi/securitybreach/base/gregory/land/metal/fly_gregory_metal_land_0',
        [71] = 'whynotboi/securitybreach/base/gregory/land/metal/fly_gregory_metal_land_0'    
    }
   
    local land6 = {
        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/land/concrete/fly_gregory_concrete_land_0',
        
        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/land/wood/fly_gregory_wood_land_0'         
    }
    
    local crouch = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/crouch/carpet/fly_gregory_carpet_crouch_0',

        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/crouch/concrete/fly_gregory_concrete_crouch_0',
        
        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/crouch/dirt/fly_gregory_dirt_crouch_0',
        [78] = 'whynotboi/securitybreach/base/gregory/crouch/dirt/fly_gregory_dirt_crouch_0',
        [68] = 'whynotboi/securitybreach/base/gregory/crouch/dirt/fly_gregory_dirt_crouch_0',

        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/crouch/hardtile/fly_gregory_hardTile_crouch_0',
        [89] = 'whynotboi/securitybreach/base/gregory/crouch/hardtile/fly_gregory_hardTile_crouch_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/crouch/metal/fly_gregory_metal_crouch_0',
        [86] = 'whynotboi/securitybreach/base/gregory/crouch/metal/fly_gregory_metal_crouch_0',
        [71] = 'whynotboi/securitybreach/base/gregory/crouch/metal/fly_gregory_metal_crouch_0',  

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/crouch/wood/fly_gregory_wood_crouch_0'             
    }

    local getup = {
        -- Carpet
        [74] = 'whynotboi/securitybreach/base/gregory/getup/carpet/fly_gregory_carpet_getUp_0',

        -- Concrete
        [67] = 'whynotboi/securitybreach/base/gregory/getup/concrete/fly_gregory_concrete_getUp_0',
        
        -- Dirt
        [85] = 'whynotboi/securitybreach/base/gregory/getup/dirt/fly_gregory_dirt_getUp_0',
        [78] = 'whynotboi/securitybreach/base/gregory/getup/dirt/fly_gregory_dirt_getUp_0',
        [68] = 'whynotboi/securitybreach/base/gregory/getup/dirt/fly_gregory_dirt_getUp_0',

        -- HardTile
        [84] = 'whynotboi/securitybreach/base/gregory/getup/hardtile/fly_gregory_hardTile_getUp_0',
        [89] = 'whynotboi/securitybreach/base/gregory/getup/hardtile/fly_gregory_hardTile_getUp_0',

        -- Metal
        [77] = 'whynotboi/securitybreach/base/gregory/getup/metal/fly_gregory_metal_getUp_0',
        [86] = 'whynotboi/securitybreach/base/gregory/getup/metal/fly_gregory_metal_getUp_0',
        [71] = 'whynotboi/securitybreach/base/gregory/getup/metal/fly_gregory_metal_getUp_0', 

        -- Wood
        [87] = 'whynotboi/securitybreach/base/gregory/getup/wood/fly_gregory_wood_crouch_getUp_0'             
    }

    function ENT:MaterialCheck()
        if IsValid(self) then
            local tr = util.TraceLine({
                start = self:GetPos(),
                endpos = self:GetPos()+Vector(0,0,-self.StepHeight),
                ignoreworld = false,
                filter = function(ent)
                    if(not IsValid(ent)||ent==NULL||ent:IsWorld()) then
                        //	return true
                    end
                end
            })
            return tr.MatType
        end
    end

    function ENT:MatStepSFX()
        if self.DisableMat or self.IsFrozen then return end
        
        local material = self:MaterialCheck()

        if not material then return end

        local path = footsteps6walk[material]

        local num = 6

        if not self.Crouched then
            if self:IsRunning() then
                path = footsteps6run[material] or footsteps7run[material]

                if footsteps7run[material] then
                    num = 7
                end
            else         
                path = footsteps6walk[material] or footsteps7walk[material]

                if footsteps7walk[material] then
                    num = 7
                end
            end
        else
            if self:IsRunning() then
                path = footstepscrouchrun6[material] or footstepscrouchrun7[material]
    
                if footstepscrouchrun7[material] then
                    num = 7
                end
            else         
                path = footstepscrouchwalk[material]
            end
        end

        if path then
            self:EmitSound(path .. math.random(num) .. '.wav', 75, 100, 0.7)
        end
    end

    function ENT:Crouch()
        local item = ''

        if self.CurrentItem == 1 then
            item = 'fl'
        end

        self.IdleAnimation = item .. 'crouchidle'
        self.WalkAnimation = item .. 'crouchwalk'
        self.RunAnimation = item .. 'crouchrun'

        self.WalkSpeed = 34.38
        self.RunSpeed = 68.75

        self.Crouched = true

        self:SetCollisionBounds(Vector(-3, -3, 0), Vector(3, 3, 30))
        
        local material = self:MaterialCheck()

        if not material then return end

        local path = crouch[material]

        local num = 5

        if path then
            self:EmitSound(path .. math.random(num) .. '.wav', 75, 100, 1, CHAN_STATIC)
        end
    end
    
    function ENT:UnCrouch()
        local item = ''
        
        if self.CurrentItem == 1 then
            item = 'fl'
        end

        self.IdleAnimation = item .. 'idle'
        self.WalkAnimation = item .. 'walk'
        self.RunAnimation = item .. 'run'

        self.WalkSpeed = 41.25
        self.RunSpeed = 210

        self.Crouched = false

        self:SetCollisionBounds(Vector(-3, -3, 0), Vector(3, 3, 40))
                
        local material = self:MaterialCheck()

        if not material then return end

        local path = getup[material]

        local num = 5

        if path then
            self:EmitSound(path .. math.random(num) .. '.wav', 75, 100, 1, CHAN_STATIC)
        end
    end

    function ENT:DoJump()
        self:Jump(90)

        if not self.VoiceDisabled and math.random(1,100) > 50 then
            self:PlayVoiceLine(self.JumpVox[math.random(#self.JumpVox)])
        end

        local material = self:MaterialCheck()

        if not material then return end

        local path = jump5[material] or jump6[material]

        local num = 5

        if jump6[material] then
            num = 6
        end

        if path then
            self:EmitSound(path .. math.random(num) .. '.wav', 75, 100, 1, CHAN_STATIC)
        end
    end

    function ENT:OnLandOnGround()
        if not self.VoiceDisabled and math.random(1,100) > 50 then
            self:PlayVoiceLine(self.LandVox[math.random(#self.LandVox)])
        end
                
        local material = self:MaterialCheck()

        if not material then return 84 end

        local path = land5[material] or land6[material]

        local num = 5

        if land6[material] then
            num = 6
        end

        if path then
            self:EmitSound(path .. math.random(num) .. '.wav', 75, 100, 0.7, CHAN_STATIC)
        end
    end
